<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Records</title>
    <link rel="icon" type="image/x-icon" href="images/logo.jpeg">
    <link rel="stylesheet" href="patient-records.css">
    <script src="https://kit.fontawesome.com/8993fc20df.js" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <img src="images/bloomm.jpeg" width="300">
        <h1>PATIENT RECORDS MANAGEMENT</h1>
        <nav class="navbar">
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="about.html">About us</a></li>
                <li><a href="payments.html">Payment</a></li>
                <li><a href="contact.html">Contact us</a></li>
                <li><a href="doctors.html">Doctors</a></li>
                <li><a class="active" href="patient-records.html">Patient Records</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="container">
            <section class="add-patient-section">
                <h2><i class="fas fa-user-plus"></i> Add New Patient Record</h2>
                <form id="patientForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="patientId">Patient ID:</label>
                            <input type="text" id="patientId" name="patientId" required placeholder="Auto-generated" readonly>
                        </div>
                        <div class="form-group">
                            <label for="admissionDate">Admission Date:</label>
                            <input type="date" id="admissionDate" name="admissionDate" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name:</label>
                            <input type="text" id="firstName" name="firstName" required placeholder="Enter first name">
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name:</label>
                            <input type="text" id="lastName" name="lastName" required placeholder="Enter last name">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="age">Age:</label>
                            <input type="number" id="age" name="age" required min="0" max="150" placeholder="Enter age">
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender:</label>
                            <select id="gender" name="gender" required>
                                <option value="">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Phone Number:</label>
                            <input type="tel" id="phone" name="phone" required pattern="[0-9]{10}" placeholder="10-digit number">
                        </div>
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" placeholder="patient@example.com">
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="address">Address:</label>
                        <textarea id="address" name="address" rows="2" required placeholder="Enter full address"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="bloodGroup">Blood Group:</label>
                            <select id="bloodGroup" name="bloodGroup" required>
                                <option value="">Select Blood Group</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="assignedDoctor">Assigned Doctor:</label>
                            <select id="assignedDoctor" name="assignedDoctor" required>
                                <option value="">Select Doctor</option>
                                <option value="Dr. Satyendra Nath Dutta">Dr. Satyendra Nath Dutta (Cardiologist)</option>
                                <option value="Dr. Rupesh Kumar">Dr. Rupesh Kumar (Nephrologist)</option>
                                <option value="Dr. Shalini Prakah">Dr. Shalini Prakah (Gynecologist)</option>
                                <option value="Dr. Vikram Adithya">Dr. Vikram Adithya (Neurologist)</option>
                                <option value="Dr. Sudha Madhuri">Dr. Sudha Madhuri (Orthopedic Surgeon)</option>
                                <option value="Dr. Anupama S">Dr. Anupama S (General Surgeon)</option>
                                <option value="Dr. Siddarth Varma">Dr. Siddarth Varma (General Surgeon)</option>
                                <option value="Dr. S Satish Kumar">Dr. S Satish Kumar (Endocrinology)</option>
                                <option value="Dr. Ankush Chanda">Dr. Ankush Chanda (Oncologist)</option>
                                <option value="Dr. Naveen Babu">Dr. Naveen Babu (Anesthesiologist)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="diagnosis">Diagnosis:</label>
                        <textarea id="diagnosis" name="diagnosis" rows="3" required placeholder="Enter diagnosis details"></textarea>
                    </div>

                    <div class="form-group full-width">
                        <label for="treatment">Treatment Plan:</label>
                        <textarea id="treatment" name="treatment" rows="3" required placeholder="Enter treatment plan"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="roomNumber">Room Number:</label>
                            <input type="text" id="roomNumber" name="roomNumber" placeholder="e.g., 101, ICU-5">
                        </div>
                        <div class="form-group">
                            <label for="status">Status:</label>
                            <select id="status" name="status" required>
                                <option value="Active">Active</option>
                                <option value="Discharged">Discharged</option>
                                <option value="Under Observation">Under Observation</option>
                                <option value="Critical">Critical</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="btn-submit"><i class="fas fa-save"></i> Save Patient Record</button>
                        <button type="reset" class="btn-reset"><i class="fas fa-redo"></i> Reset Form</button>
                    </div>
                </form>
            </section>

            <section class="records-section">
                <h2><i class="fas fa-list"></i> Patient Records</h2>
                
                <div class="search-filter">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search by name, ID, or doctor...">
                    </div>
                    <div class="filter-box">
                        <label for="statusFilter">Filter by Status:</label>
                        <select id="statusFilter">
                            <option value="All">All</option>
                            <option value="Active">Active</option>
                            <option value="Discharged">Discharged</option>
                            <option value="Under Observation">Under Observation</option>
                            <option value="Critical">Critical</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table id="patientTable">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Name</th>
                                <th>Age</th>
                                <th>Gender</th>
                                <th>Phone</th>
                                <th>Blood Group</th>
                                <th>Assigned Doctor</th>
                                <th>Diagnosis</th>
                                <th>Admission Date</th>
                                <th>Room</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="patientTableBody">
                            <tr class="no-records">
                                <td colspan="12">No patient records found. Add a new patient to get started.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="stats-container">
                    <div class="stat-card">
                        <i class="fas fa-users"></i>
                        <div class="stat-info">
                            <h3 id="totalPatients">0</h3>
                            <p>Total Patients</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-user-check"></i>
                        <div class="stat-info">
                            <h3 id="activePatients">0</h3>
                            <p>Active Patients</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-user-times"></i>
                        <div class="stat-info">
                            <h3 id="dischargedPatients">0</h3>
                            <p>Discharged</p>
                        </div>
                    </div>
                    <div class="stat-card critical">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div class="stat-info">
                            <h3 id="criticalPatients">0</h3>
                            <p>Critical</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2><i class="fas fa-edit"></i> Edit Patient Record</h2>
            <form id="editPatientForm">
                <input type="hidden" id="editPatientId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editFirstName">First Name:</label>
                        <input type="text" id="editFirstName" required>
                    </div>
                    <div class="form-group">
                        <label for="editLastName">Last Name:</label>
                        <input type="text" id="editLastName" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editAge">Age:</label>
                        <input type="number" id="editAge" required min="0" max="150">
                    </div>
                    <div class="form-group">
                        <label for="editGender">Gender:</label>
                        <select id="editGender" required>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editPhone">Phone:</label>
                        <input type="tel" id="editPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="editBloodGroup">Blood Group:</label>
                        <select id="editBloodGroup" required>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="editDiagnosis">Diagnosis:</label>
                    <textarea id="editDiagnosis" rows="3" required></textarea>
                </div>

                <div class="form-group full-width">
                    <label for="editTreatment">Treatment:</label>
                    <textarea id="editTreatment" rows="3" required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editRoomNumber">Room Number:</label>
                        <input type="text" id="editRoomNumber">
                    </div>
                    <div class="form-group">
                        <label for="editStatus">Status:</label>
                        <select id="editStatus" required>
                            <option value="Active">Active</option>
                            <option value="Discharged">Discharged</option>
                            <option value="Under Observation">Under Observation</option>
                            <option value="Critical">Critical</option>
                        </select>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="submit" class="btn-submit"><i class="fas fa-save"></i> Update Record</button>
                    <button type="button" class="btn-reset" onclick="closeModal()"><i class="fas fa-times"></i> Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <footer>
        <div class="follow">
            <p><b>Follow us</b></p>
            <div class="icon">
                <i class="fa-brands fa-facebook"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-snapchat"></i>
                <i class="fa-brands fa-youtube"></i>
            </div>
        </div>
        <p><b>Install app from Google play or App Store</b></p>
        <img src="images/gpas.png" alt="playstore" height="40">
        <p><b>Secured Payments Gateway</b></p>
        <img src="images/payment gateway.jpg" alt="payment gateway" width="200" height="50">
        <br>
        author: BloomCare<br>
        &copy; copyright 2024.BLOOMCARE Hospitals Group.All rights Reserved
        <br>
        
        <address>
            Written by BloomCare.<br>
            Visit us at:<br>
            Bloomcare.com<br>
            Palamaner<br>
        </address>
    </footer>

    <script>
        let patients = JSON.parse(localStorage.getItem('patients')) || [];
        let patientIdCounter = parseInt(localStorage.getItem('patientIdCounter')) || 1;

        function generatePatientId() {
            const id = 'P' + String(patientIdCounter).padStart(5, '0');
            patientIdCounter++;
            localStorage.setItem('patientIdCounter', patientIdCounter);
            return id;
        }

        document.getElementById('patientId').value = generatePatientId();

        document.getElementById('patientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const patient = {
                id: document.getElementById('patientId').value,
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                age: document.getElementById('age').value,
                gender: document.getElementById('gender').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                bloodGroup: document.getElementById('bloodGroup').value,
                assignedDoctor: document.getElementById('assignedDoctor').value,
                diagnosis: document.getElementById('diagnosis').value,
                treatment: document.getElementById('treatment').value,
                admissionDate: document.getElementById('admissionDate').value,
                roomNumber: document.getElementById('roomNumber').value,
                status: document.getElementById('status').value
            };

            patients.push(patient);
            localStorage.setItem('patients', JSON.stringify(patients));
            
            alert('Patient record added successfully!');
            this.reset();
            document.getElementById('patientId').value = generatePatientId();
            displayPatients();
            updateStats();
        });

        function displayPatients(filteredPatients = null) {
            const tbody = document.getElementById('patientTableBody');
            const patientsToDisplay = filteredPatients || patients;
            
            if (patientsToDisplay.length === 0) {
                tbody.innerHTML = '<tr class="no-records"><td colspan="12">No patient records found.</td></tr>';
                return;
            }

            tbody.innerHTML = '';
            patientsToDisplay.forEach((patient, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${patient.id}</td>
                    <td>${patient.firstName} ${patient.lastName}</td>
                    <td>${patient.age}</td>
                    <td>${patient.gender}</td>
                    <td>${patient.phone}</td>
                    <td>${patient.bloodGroup}</td>
                    <td>${patient.assignedDoctor}</td>
                    <td>${patient.diagnosis}</td>
                    <td>${patient.admissionDate}</td>
                    <td>${patient.roomNumber || 'N/A'}</td>
                    <td><span class="status-badge ${patient.status.toLowerCase().replace(' ', '-')}">${patient.status}</span></td>
                    <td class="action-buttons">
                        <button onclick="viewPatient('${patient.id}')" class="btn-view" title="View Details"><i class="fas fa-eye"></i></button>
                        <button onclick="editPatient('${patient.id}')" class="btn-edit" title="Edit"><i class="fas fa-edit"></i></button>
                        <button onclick="deletePatient('${patient.id}')" class="btn-delete" title="Delete"><i class="fas fa-trash"></i></button>
                    </td>
                `;
            });
        }

        function viewPatient(id) {
            const patient = patients.find(p => p.id === id);
            if (patient) {
                const details = `
Patient ID: ${patient.id}
Name: ${patient.firstName} ${patient.lastName}
Age: ${patient.age}
Gender: ${patient.gender}
Phone: ${patient.phone}
Email: ${patient.email || 'N/A'}
Address: ${patient.address}
Blood Group: ${patient.bloodGroup}
Assigned Doctor: ${patient.assignedDoctor}
Diagnosis: ${patient.diagnosis}
Treatment: ${patient.treatment}
Admission Date: ${patient.admissionDate}
Room Number: ${patient.roomNumber || 'N/A'}
Status: ${patient.status}
                `;
                alert(details);
            }
        }

        function editPatient(id) {
            const patient = patients.find(p => p.id === id);
            if (patient) {
                document.getElementById('editPatientId').value = patient.id;
                document.getElementById('editFirstName').value = patient.firstName;
                document.getElementById('editLastName').value = patient.lastName;
                document.getElementById('editAge').value = patient.age;
                document.getElementById('editGender').value = patient.gender;
                document.getElementById('editPhone').value = patient.phone;
                document.getElementById('editBloodGroup').value = patient.bloodGroup;
                document.getElementById('editDiagnosis').value = patient.diagnosis;
                document.getElementById('editTreatment').value = patient.treatment;
                document.getElementById('editRoomNumber').value = patient.roomNumber;
                document.getElementById('editStatus').value = patient.status;
                
                document.getElementById('editModal').style.display = 'block';
            }
        }

        document.getElementById('editPatientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = document.getElementById('editPatientId').value;
            const index = patients.findIndex(p => p.id === id);
            
            if (index !== -1) {
                patients[index].firstName = document.getElementById('editFirstName').value;
                patients[index].lastName = document.getElementById('editLastName').value;
                patients[index].age = document.getElementById('editAge').value;
                patients[index].gender = document.getElementById('editGender').value;
                patients[index].phone = document.getElementById('editPhone').value;
                patients[index].bloodGroup = document.getElementById('editBloodGroup').value;
                patients[index].diagnosis = document.getElementById('editDiagnosis').value;
                patients[index].treatment = document.getElementById('editTreatment').value;
                patients[index].roomNumber = document.getElementById('editRoomNumber').value;
                patients[index].status = document.getElementById('editStatus').value;
                
                localStorage.setItem('patients', JSON.stringify(patients));
                alert('Patient record updated successfully!');
                closeModal();
                displayPatients();
                updateStats();
            }
        });

        function deletePatient(id) {
            if (confirm('Are you sure you want to delete this patient record?')) {
                patients = patients.filter(p => p.id !== id);
                localStorage.setItem('patients', JSON.stringify(patients));
                alert('Patient record deleted successfully!');
                displayPatients();
                updateStats();
            }
        }

        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        document.querySelector('.close').onclick = closeModal;

        window.onclick = function(event) {
            const modal = document.getElementById('editModal');
            if (event.target == modal) {
                closeModal();
            }
        }

        document.getElementById('searchInput').addEventListener('keyup', function() {
            const searchTerm = this.value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            
            let filtered = patients.filter(patient => {
                const matchesSearch = 
                    patient.id.toLowerCase().includes(searchTerm) ||
                    (patient.firstName + ' ' + patient.lastName).toLowerCase().includes(searchTerm) ||
                    patient.assignedDoctor.toLowerCase().includes(searchTerm) ||
                    patient.diagnosis.toLowerCase().includes(searchTerm);
                
                const matchesStatus = statusFilter === 'All' || patient.status === statusFilter;
                
                return matchesSearch && matchesStatus;
            });
            
            displayPatients(filtered);
        });

        document.getElementById('statusFilter').addEventListener('change', function() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = this.value;
            
            let filtered = patients.filter(patient => {
                const matchesSearch = 
                    patient.id.toLowerCase().includes(searchTerm) ||
                    (patient.firstName + ' ' + patient.lastName).toLowerCase().includes(searchTerm) ||
                    patient.assignedDoctor.toLowerCase().includes(searchTerm) ||
                    patient.diagnosis.toLowerCase().includes(searchTerm);
                
                const matchesStatus = statusFilter === 'All' || patient.status === statusFilter;
                
                return matchesSearch && matchesStatus;
            });
            
            displayPatients(filtered);
        });

        function updateStats() {
            document.getElementById('totalPatients').textContent = patients.length;
            document.getElementById('activePatients').textContent = patients.filter(p => p.status === 'Active').length;
            document.getElementById('dischargedPatients').textContent = patients.filter(p => p.status === 'Discharged').length;
            document.getElementById('criticalPatients').textContent = patients.filter(p => p.status === 'Critical').length;
        }

        displayPatients();
        updateStats();
    </script>
</body>
</html>
